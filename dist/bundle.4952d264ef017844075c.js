(()=>{"use strict";var n={16(n,t,e){e.d(t,{A:()=>A});var r=e(354),i=e.n(r),s=e(314),o=e.n(s),a=e(417),l=e.n(a),d=new URL(e(788),e.b),c=o()(i()),p=l()(d);c.push([n.id,`body {\n  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\n  margin: 24px;\n}\n\n#game {\n  display: grid;\n  grid-template-columns: repeat(4, 120px);\n  grid-template-rows: repeat(4, 120px);\n  gap: 10px;\n  cursor: url(${p}) 16 16, pointer;\n}\n\n.cell {\n  width: 120px;\n  height: 120px;\n  border: 2px solid #333;\n  border-radius: 12px;\n  display: grid;\n  place-items: center;\n  background: #f6f6f6;\n}\n\n.goblin {\n  width: 80px;\n  height: 80px;\n  user-select: none;\n  pointer-events: none;\n}\n\n.panel {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 16px;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.panel__item {\n  padding: 8px 12px;\n  border: 2px solid #333;\n  border-radius: 10px;\n  background: #fff;\n}\n\n.modal-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.55);\n  display: grid;\n  place-items: center;\n  padding: 16px;\n  z-index: 9999;\n}\n\n.modal-overlay.hidden {\n  display: none;\n}\n\n.modal {\n  width: min(420px, 100%);\n  background: #fff;\n  border: 2px solid #333;\n  border-radius: 14px;\n  padding: 18px;\n  box-shadow: 0 10px 30px rgba(0,0,0,.25);\n}\n\n.modal__title {\n  margin: 0 0 10px;\n  font-size: 22px;\n}\n\n.modal__text {\n  margin: 0 0 16px;\n  font-size: 16px;\n}\n\n.modal__actions {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.modal__btn {\n  padding: 10px 14px;\n  border-radius: 10px;\n  border: 2px solid #333;\n  background: #f6f6f6;\n  font-weight: 700;\n  cursor: pointer;\n}`,"",{version:3,sources:["webpack://./src/css/style.css"],names:[],mappings:"AAAA;EACE,0EAA0E;EAC1E,YAAY;AACd;;AAEA;EACE,aAAa;EACb,uCAAuC;EACvC,oCAAoC;EACpC,SAAS;EACT,8DAAgD;AAClD;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,aAAa;EACb,SAAS;EACT,mBAAmB;EACnB,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;EACjB,sBAAsB;EACtB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,QAAQ;EACR,+BAA+B;EAC/B,aAAa;EACb,mBAAmB;EACnB,aAAa;EACb,aAAa;AACf;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,uBAAuB;EACvB,gBAAgB;EAChB,sBAAsB;EACtB,mBAAmB;EACnB,aAAa;EACb,uCAAuC;AACzC;;AAEA;EACE,gBAAgB;EAChB,eAAe;AACjB;;AAEA;EACE,gBAAgB;EAChB,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,yBAAyB;AAC3B;;AAEA;EACE,kBAAkB;EAClB,mBAAmB;EACnB,sBAAsB;EACtB,mBAAmB;EACnB,gBAAgB;EAChB,eAAe;AACjB",sourcesContent:["body {\r\n  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\r\n  margin: 24px;\r\n}\r\n\r\n#game {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 120px);\r\n  grid-template-rows: repeat(4, 120px);\r\n  gap: 10px;\r\n  cursor: url('../icon/hammer.svg') 16 16, pointer;\r\n}\r\n\r\n.cell {\r\n  width: 120px;\r\n  height: 120px;\r\n  border: 2px solid #333;\r\n  border-radius: 12px;\r\n  display: grid;\r\n  place-items: center;\r\n  background: #f6f6f6;\r\n}\r\n\r\n.goblin {\r\n  width: 80px;\r\n  height: 80px;\r\n  user-select: none;\r\n  pointer-events: none;\r\n}\r\n\r\n.panel {\r\n  display: flex;\r\n  gap: 16px;\r\n  margin-bottom: 16px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.panel__item {\r\n  padding: 8px 12px;\r\n  border: 2px solid #333;\r\n  border-radius: 10px;\r\n  background: #fff;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(0, 0, 0, 0.55);\r\n  display: grid;\r\n  place-items: center;\r\n  padding: 16px;\r\n  z-index: 9999;\r\n}\r\n\r\n.modal-overlay.hidden {\r\n  display: none;\r\n}\r\n\r\n.modal {\r\n  width: min(420px, 100%);\r\n  background: #fff;\r\n  border: 2px solid #333;\r\n  border-radius: 14px;\r\n  padding: 18px;\r\n  box-shadow: 0 10px 30px rgba(0,0,0,.25);\r\n}\r\n\r\n.modal__title {\r\n  margin: 0 0 10px;\r\n  font-size: 22px;\r\n}\r\n\r\n.modal__text {\r\n  margin: 0 0 16px;\r\n  font-size: 16px;\r\n}\r\n\r\n.modal__actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.modal__btn {\r\n  padding: 10px 14px;\r\n  border-radius: 10px;\r\n  border: 2px solid #333;\r\n  background: #f6f6f6;\r\n  font-weight: 700;\r\n  cursor: pointer;\r\n}"],sourceRoot:""}]);const A=c},314(n){n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var e="",r=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),r&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),r&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},t.i=function(n,e,r,i,s){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),e&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=e):c[2]=e),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},417(n){n.exports=function(n,t){return t||(t={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),t.hash&&(n+=t.hash),/["'() \t\n]|(%20)/.test(n)||t.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},354(n){n.exports=function(n){var t=n[1],e=n[3];if(!e)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},72(n){var t=[];function e(n){for(var e=-1,r=0;r<t.length;r++)if(t[r].identifier===n){e=r;break}return e}function r(n,r){for(var s={},o=[],a=0;a<n.length;a++){var l=n[a],d=r.base?l[0]+r.base:l[0],c=s[d]||0,p="".concat(d," ").concat(c);s[d]=c+1;var A=e(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==A)t[A].references++,t[A].updater(h);else{var u=i(h,r);r.byIndex=a,t.splice(a,0,{identifier:p,updater:u,references:1})}o.push(p)}return o}function i(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,i){var s=r(n=n||[],i=i||{});return function(n){n=n||[];for(var o=0;o<s.length;o++){var a=e(s[o]);t[a].references--}for(var l=r(n,i),d=0;d<s.length;d++){var c=e(s[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},659(n){var t={};n.exports=function(n,e){var r=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}},540(n){n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},56(n,t,e){n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},825(n){n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var r="";e.supports&&(r+="@supports (".concat(e.supports,") {")),e.media&&(r+="@media ".concat(e.media," {"));var i=void 0!==e.layer;i&&(r+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),r+=e.css,i&&(r+="}"),e.media&&(r+="}"),e.supports&&(r+="}");var s=e.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}},113(n){n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},788(n,t,e){n.exports=e.p+"assets/hammer.30bad8a3d744405455f2.svg"}},t={};function e(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,exports:{}};return n[r](s,s.exports,e),s.exports}e.m=n,e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.p="./",e.b="undefined"!=typeof document&&document.baseURI||self.location.href,e.nc=void 0;var r=e(72),i=e.n(r),s=e(825),o=e.n(s),a=e(659),l=e.n(a),d=e(56),c=e.n(d),p=e(540),A=e.n(p),h=e(113),u=e.n(h),m=e(16),f={};f.styleTagTransform=u(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=A(),i()(m.A,f),m.A&&m.A.locals&&m.A.locals;class g{constructor(n,t=4){if(!n)throw new Error("Board: container is required");this.container=n,this.size=t,this.cells=[]}init(){this.container.innerHTML="",this.cells=[];const n=this.size*this.size;for(let t=0;t<n;t+=1){const n=document.createElement("div");n.classList.add("cell"),n.dataset.index=String(t),this.container.append(n),this.cells.push(n)}}getCell(n){return this.cells[n]}get totalCells(){return this.cells.length}}const E=e.p+"assets/goblin.2dbd01ce16c0fa83cb67.png";function x(n){return Math.floor(Math.random()*n)}class b{constructor(n){this.board=n,this.img=null,this.currentIndex=-1,this.isVisible=!1,this.wasHit=!1}init(){const n=document.createElement("img");n.classList.add("goblin"),n.src=E,n.alt="goblin",this.img=n}spawnRandom(){const n=x(this.board.totalCells);this.currentIndex=n,this.wasHit=!1,this.isVisible=!0,this.board.getCell(n).append(this.img)}moveRandomNoSame(){const n=this.board.totalCells;if(this.currentIndex<0)return void this.spawnRandom();const t=function(n,t){if(t<=1)return 0;let e=x(t);for(;e===n;)e=x(t);return e}(this.currentIndex,n);this.currentIndex=t,this.wasHit=!1,this.isVisible=!0,this.board.getCell(t).append(this.img)}hide(){this.img&&(this.img.style.display="none"),this.isVisible=!1}show(){this.img&&(this.img.style.display="block"),this.isVisible=!0}hit(){this.wasHit=!0,this.hide()}}class C{constructor(n){this.container=n,this.points=0,this.misses=0,this.scoreEl=null,this.missEl=null}init(){if(this.scoreEl&&this.missEl)return void this.render();const n=document.createElement("div");n.classList.add("panel"),this.scoreEl=document.createElement("div"),this.missEl=document.createElement("div"),this.scoreEl.classList.add("panel__item"),this.missEl.classList.add("panel__item"),n.append(this.scoreEl,this.missEl),this.container.parentElement?.insertBefore(n,this.container),this.render()}addPoint(){this.points+=1,this.render()}addMiss(){this.misses+=1,this.render()}render(){this.scoreEl&&(this.scoreEl.textContent=`Очки: ${this.points}`),this.missEl&&(this.missEl.textContent=`Промахи: ${this.misses} / 5`)}}class v{constructor(){this.overlay=null,this.titleEl=null,this.textEl=null,this.primaryBtn=null,this.onPrimary=null}init(){if(this.overlay)return;const n=document.createElement("div");n.className="modal-overlay hidden";const t=document.createElement("div");t.className="modal";const e=document.createElement("h2");e.className="modal__title";const r=document.createElement("p");r.className="modal__text";const i=document.createElement("div");i.className="modal__actions";const s=document.createElement("button");s.type="button",s.className="modal__btn",s.textContent="Начать заново",i.append(s),t.append(e,r,i),n.append(t),document.body.append(n),n.addEventListener("click",t=>{t.target===n&&this.hide()}),s.addEventListener("click",()=>{this.hide(),"function"==typeof this.onPrimary&&this.onPrimary()}),this.overlay=n,this.titleEl=e,this.textEl=r,this.primaryBtn=s}show({title:n,text:t,buttonText:e,onPrimary:r}){this.init(),this.titleEl.textContent=n??"",this.textEl.textContent=t??"",this.primaryBtn.textContent=e??"Ок",this.onPrimary=r??null,this.overlay.classList.remove("hidden")}hide(){this.overlay&&this.overlay.classList.add("hidden")}}class B{constructor(n,t,e){this.board=n,this.goblin=t,this.score=e,this.intervalId=null,this.durationMs=1e3,this.maxMisses=5,this.modal=new v,this.onBoardClick=this.onBoardClick.bind(this)}start(){this.stop(),this.board.init(),this.goblin.init(),this.score.init(),this.goblin.spawnRandom(),this.goblin.show(),this.board.container.addEventListener("click",this.onBoardClick),this.intervalId=setInterval(()=>{this.goblin.isVisible&&!this.goblin.wasHit&&(this.score.addMiss(),this.score.misses>=this.maxMisses)?this.gameOver():(this.goblin.show(),this.goblin.moveRandomNoSame())},this.durationMs)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.board?.container&&this.board.container.removeEventListener("click",this.onBoardClick)}onBoardClick(n){const t=n.target.closest(".cell");if(!t)return;const e=Number(t.dataset.index);this.goblin.isVisible&&e===this.goblin.currentIndex&&(this.goblin.hit(),this.score.addPoint())}gameOver(){this.stop(),this.goblin.hide(),this.modal.show({title:"Игра окончена",text:`Ваш результат: ${this.score.points}`,buttonText:"Начать заново",onPrimary:()=>this.restart()})}restart(){this.score.points=0,this.score.misses=0,this.score.render(),this.start()}}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("game");if(!n)return void console.log('Элемент с id "game" не найден');const t=new g(n,4),e=new C(n),r=new b(t);new B(t,r,e).start()})})();
//# sourceMappingURL=bundle.4952d264ef017844075c.js.map