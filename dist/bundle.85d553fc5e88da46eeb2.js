(()=>{"use strict";var t={16(t,e,n){n.d(e,{A:()=>h});var s=n(354),i=n.n(s),r=n(314),o=n.n(r),a=n(417),c=n.n(a),l=new URL(n(788),n.b),d=o()(i()),p=c()(l);d.push([t.id,`body {\n  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\n  margin: 24px;\n}\n\n#game {\n  display: grid;\n  grid-template-columns: repeat(4, 120px);\n  grid-template-rows: repeat(4, 120px);\n  gap: 10px;\n  cursor: url(${p}) 16 16, pointer;\n}\n\n.cell {\n  width: 120px;\n  height: 120px;\n  border: 2px solid #333;\n  border-radius: 12px;\n  display: grid;\n  place-items: center;\n  background: #f6f6f6;\n}\n\n.goblin {\n  width: 80px;\n  height: 80px;\n  user-select: none;\n  pointer-events: none;\n}\n\n.panel {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 16px;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.panel__item {\n  padding: 8px 12px;\n  border: 2px solid #333;\n  border-radius: 10px;\n  background: #fff;\n}\n\n`,"",{version:3,sources:["webpack://./src/css/style.css"],names:[],mappings:"AAAA;EACE,0EAA0E;EAC1E,YAAY;AACd;;AAEA;EACE,aAAa;EACb,uCAAuC;EACvC,oCAAoC;EACpC,SAAS;EACT,8DAAgD;AAClD;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,aAAa;EACb,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,aAAa;EACb,SAAS;EACT,mBAAmB;EACnB,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;EACjB,sBAAsB;EACtB,mBAAmB;EACnB,gBAAgB;AAClB",sourcesContent:["body {\r\n  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\r\n  margin: 24px;\r\n}\r\n\r\n#game {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 120px);\r\n  grid-template-rows: repeat(4, 120px);\r\n  gap: 10px;\r\n  cursor: url('../icon/hammer.svg') 16 16, pointer;\r\n}\r\n\r\n.cell {\r\n  width: 120px;\r\n  height: 120px;\r\n  border: 2px solid #333;\r\n  border-radius: 12px;\r\n  display: grid;\r\n  place-items: center;\r\n  background: #f6f6f6;\r\n}\r\n\r\n.goblin {\r\n  width: 80px;\r\n  height: 80px;\r\n  user-select: none;\r\n  pointer-events: none;\r\n}\r\n\r\n.panel {\r\n  display: flex;\r\n  gap: 16px;\r\n  margin-bottom: 16px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n\r\n.panel__item {\r\n  padding: 8px 12px;\r\n  border: 2px solid #333;\r\n  border-radius: 10px;\r\n  background: #fff;\r\n}\r\n\r\n"],sourceRoot:""}]);const h=d},314(t){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",s=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),s&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),s&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,s,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);s&&o[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),e.push(d))}},e}},417(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},354(t){t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),r="/*# ".concat(i," */");return[e].concat([r]).join("\n")}return[e].join("\n")}},72(t){var e=[];function n(t){for(var n=-1,s=0;s<e.length;s++)if(e[s].identifier===t){n=s;break}return n}function s(t,s){for(var r={},o=[],a=0;a<t.length;a++){var c=t[a],l=s.base?c[0]+s.base:c[0],d=r[l]||0,p="".concat(l," ").concat(d);r[l]=d+1;var h=n(p),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var m=i(u,s);s.byIndex=a,e.splice(a,0,{identifier:p,updater:m,references:1})}o.push(p)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var r=s(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=n(r[o]);e[a].references--}for(var c=s(t,i),l=0;l<r.length;l++){var d=n(r[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=c}}},659(t){var e={};t.exports=function(t,n){var s=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},540(t){t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56(t,e,n){t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825(t){t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113(t){t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},788(t,e,n){t.exports=n.p+"assets/hammer.30bad8a3d744405455f2.svg"}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={id:s,exports:{}};return t[s](r,r.exports,n),r.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",n.b="undefined"!=typeof document&&document.baseURI||self.location.href,n.nc=void 0;var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),c=n.n(a),l=n(56),d=n.n(l),p=n(540),h=n.n(p),u=n(113),m=n.n(u),A=n(16),f={};f.styleTagTransform=m(),f.setAttributes=d(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h(),i()(A.A,f),A.A&&A.A.locals&&A.A.locals;class g{constructor(t,e=4){if(!t)throw new Error("Board: container is required");this.container=t,this.size=e,this.cells=[]}init(){this.container.innerHTML="",this.cells=[];const t=this.size*this.size;for(let e=0;e<t;e+=1){const t=document.createElement("div");t.classList.add("cell"),t.dataset.index=String(e),this.container.append(t),this.cells.push(t)}}getCell(t){return this.cells[t]}get totalCells(){return this.cells.length}}const b=n.p+"assets/goblin.2dbd01ce16c0fa83cb67.png";function v(t){return Math.floor(Math.random()*t)}class E{constructor(t){this.board=t,this.img=null,this.currentIndex=-1,this.isVisible=!1,this.wasHit=!1}init(){const t=document.createElement("img");t.classList.add("goblin"),t.src=b,t.alt="goblin",this.img=t}spawnRandom(){const t=v(this.board.totalCells);this.currentIndex=t,this.wasHit=!1,this.isVisible=!0,this.board.getCell(t).append(this.img)}moveRandomNoSame(){const t=this.board.totalCells;if(this.currentIndex<0)return void this.spawnRandom();const e=function(t,e){if(e<=1)return 0;let n=v(e);for(;n===t;)n=v(e);return n}(this.currentIndex,t);this.currentIndex=e,this.wasHit=!1,this.isVisible=!0,this.board.getCell(e).append(this.img)}hide(){this.img&&(this.img.style.display="none"),this.isVisible=!1}show(){this.img&&(this.img.style.display="block"),this.isVisible=!0}hit(){this.wasHit=!0,this.hide()}}class x{constructor(t){this.container=t,this.points=0,this.misses=0,this.scoreEl=null,this.missEl=null}init(){if(this.scoreEl&&this.missEl)return void this.render();const t=document.createElement("div");t.classList.add("panel"),this.scoreEl=document.createElement("div"),this.missEl=document.createElement("div"),this.scoreEl.classList.add("panel__item"),this.missEl.classList.add("panel__item"),t.append(this.scoreEl,this.missEl),this.container.parentElement?.insertBefore(t,this.container),this.render()}addPoint(){this.points+=1,this.render()}addMiss(){this.misses+=1,this.render()}render(){this.scoreEl&&(this.scoreEl.textContent=`Очки: ${this.points}`),this.missEl&&(this.missEl.textContent=`Промахи: ${this.misses} / 5`)}}class C{constructor(t,e,n){this.board=t,this.goblin=e,this.score=n,this.intervalId=null,this.durationMs=1e3,this.maxMisses=5,this.onBoardClick=this.onBoardClick.bind(this)}start(){this.stop(),this.board.init(),this.goblin.init(),this.score.init(),this.goblin.spawnRandom(),this.goblin.show(),this.board.container.addEventListener("click",this.onBoardClick),this.intervalId=setInterval(()=>{this.goblin.isVisible&&!this.goblin.wasHit&&(this.score.addMiss(),this.score.misses>=this.maxMisses)?this.gameOver():(this.goblin.show(),this.goblin.moveRandomNoSame())},this.durationMs)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.board?.container&&this.board.container.removeEventListener("click",this.onBoardClick)}onBoardClick(t){const e=t.target.closest(".cell");if(!e)return;const n=Number(e.dataset.index);this.goblin.isVisible&&n===this.goblin.currentIndex&&(this.goblin.hit(),this.score.addPoint())}gameOver(){this.stop(),this.goblin.hide(),alert(`Game Over!\nОчки: ${this.score.points}`),this.restart()}restart(){this.score.points=0,this.score.misses=0,this.score.render(),this.start()}}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("game");if(!t)return void console.log('Элемент с id "game" не найден');const e=new g(t,4),n=new x(t),s=new E(e);new C(e,s,n).start()})})();
//# sourceMappingURL=bundle.85d553fc5e88da46eeb2.js.map